{% extends "layout.html" %}
{% block content %}
<div class="row search">
	<div class="col-md-12">
		<form action="{{ url_for('search') }}" id="f_search" role="search" method="get">
        <div class="input-group" id="adv-search">
            <input type="text" name="q" class="form-control" placeholder="Search"/>
            <div class="input-group-btn">
                <div class="btn-group" role="group">
                    <!-- <div class="dropdown dropdown-lg">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span class="caret"></span></button>
                        <div class="dropdown-menu dropdown-menu-right" role="menu">
                            <form class="form-horizontal" role="form">
                              <div class="form-group">
                                <label for="contain">Author</label>
                                <input class="form-control" type="text" />
                              </div>
                              <div class="form-group">
                                <label for="contain">Contains the words</label>
                                <input class="form-control" type="text" />
                              </div>
                              <button type="submit" class="btn btn-primary"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
                            </form>
                        </div>
                    </div>
                    -->
                    <button type="submit" class="btn btn-primary"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
                </div>
            </div>
        </div>
        </form>
    </div>
</div>

 <div class="row">
  <div class="col-lg-6">
  {% if metadata %}
    {% if results|length == 1 %}
      <p class="text-muted">{{results|length}} result found ({{metadata.time}}s)</p>
    {% else %}
      <p class="text-muted">{{results|length}} results found ({{metadata.time}}s)</p>
    {% endif %}    
  {% else %}
  <!-- show nothing -->
  {% endif %}
  	{% for result in results %}
    <article class="search-result row">
          <div class="col-xs-12 col-sm-12 col-md-12 excerpet">
            <h4 class="title"><strong class="score" title="Relevance score: {{ result.score }}">{{result.rank}}</strong><a href="#">{{ result.title }}</a></h4>
            <span class="text-success">{{ result.authors }} - {{ result.year }} - {{ result.venue }}</span>
            <a href="#" data-toggle="tooltip" title="{{ result.key }}"><span class="glyphicon glyphicon-link"></span></a>
            <p class="snippet">{{ result.text|safe }}</p>
            <span class="text-info">Relevance score: {{ result.score }}</span>
          </div>
          <span class="clearfix borda"></span>
        </article>
  	{% endfor %}
  </div><!-- /.col-lg-6 -->
</div><!-- /.row -->
{% endblock %}

{% block js_footer %}
{{ super() }}
<script type="text/javascript">
  $(".form-control").val('{{query}}')
</script>

{% endblock %}
